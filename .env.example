# KiroGate - 环境配置
# 将此文件复制为 .env 并填写你的配置

# ===========================================
# 必填项
# ===========================================

# 用于保护你的代理服务器的密码
# 这不是从其他地方获取的 token - 你自己设置一个！
# 连接网关时使用这个值作为 api_key
# 示例: "my-super-secret-password-123" 或任何安全的字符串
PROXY_API_KEY="my-super-secret-password-123"

# ===========================================
# 方式一: JSON 凭证文件（推荐）
# ===========================================

# JSON 凭证文件路径或远程 URL（替代 REFRESH_TOKEN）
# 本地文件: KIRO_CREDS_FILE="~/.aws/sso/cache/kiro-auth-token.json"
# 远程 URL:  KIRO_CREDS_FILE="https://example.com/kiro-credentials.json"
KIRO_CREDS_FILE="~/.aws/sso/cache/kiro-auth-token.json"

# ===========================================
# 方式二: Kiro Refresh Token (Social 登录)
# ===========================================

# 从 Kiro IDE 流量中获取的 refresh token
# 适用于使用 Google/GitHub 等社交账号登录的用户
# （替代 KIRO_CREDS_FILE）
# REFRESH_TOKEN="your_kiro_refresh_token_here"

# ===========================================
# 方式三: IDC 登录 (AWS Builder ID)
# ===========================================

# 如果你使用 AWS Builder ID 登录 Kiro IDE，需要额外配置：
# CLIENT_ID="your_client_id"
# CLIENT_SECRET="your_client_secret"
# REFRESH_TOKEN="your_refresh_token"
# 
# 这些值可以从 Kiro IDE 的凭证文件中获取：
# - Windows: %APPDATA%\Kiro\credentials.json
# - macOS: ~/Library/Application Support/Kiro/credentials.json
# - Linux: ~/.config/Kiro/credentials.json

# ===========================================
# 可选项
# ===========================================

# AWS CodeWhisperer profile ARN（通常自动检测）
# PROFILE_ARN="arn:aws:codewhisperer:us-east-1:..."

# AWS 区域（默认: us-east-1）
# KIRO_REGION="us-east-1"

# ===========================================
# 日志设置
# ===========================================

# 日志级别: TRACE, DEBUG, INFO, WARNING, ERROR, CRITICAL
# 默认: INFO（生产环境推荐）
# 设置为 DEBUG 以获取详细的调试信息
# LOG_LEVEL="INFO"

# ===========================================
# 超时设置
# ===========================================

# 等待模型返回第一个 token 的超时时间（秒）
# 如果模型在此时间内没有响应，请求将被取消并重试
# 对于 Opus 等慢模型，建议设置为 60-120 秒
# 默认: 60 秒
# FIRST_TOKEN_TIMEOUT="60"

# 首个 token 超时时的最大重试次数
# 用完所有尝试后，将返回 504 Gateway Timeout 错误
# 默认: 5 次
# FIRST_TOKEN_MAX_RETRIES="5"

# 流式读取超时（秒）- 读取流中每个 chunk 的最大等待时间
# 当模型生成响应时，如果某个 chunk 超过此时间未返回，将触发超时
# 对于 Opus 等慢模型，建议设置为 120-300 秒
# 默认: 120 秒
# STREAM_READ_TIMEOUT="120"

# 非流式请求超时（秒）- 等待完整响应的最大时间
# 对于复杂请求或 Opus 模型，建议设置为 300-600 秒
# 默认: 600 秒（10 分钟）
# NON_STREAM_TIMEOUT="600"

# ===========================================
# 调试（仅用于开发）
# ===========================================

# 调试日志模式:
# - off: 禁用（默认）
# - errors: 仅保存失败请求的日志 (4xx, 5xx) - 推荐用于排查问题
# - all: 保存所有请求的日志（每次请求覆盖）
# DEBUG_MODE=off

# 调试日志文件目录
# DEBUG_DIR="debug_logs"

# ===========================================
# Admin 管理后台（可选）
# ===========================================

# 管理员密码（用于登录 /admin 管理页面）
# 请在生产环境中设置一个强密码！
# ADMIN_PASSWORD="admin123"

# Session 签名密钥（请在生产环境中更改为随机字符串）
# ADMIN_SECRET_KEY="your-random-secret-key-here"

# Session 有效期（秒），默认 24 小时
# ADMIN_SESSION_MAX_AGE=86400

# ===========================================
# OAuth2 用户登录（可选）
# ===========================================

# --- LinuxDo OAuth2 ---
# 从 https://connect.linux.do 获取
# OAUTH_CLIENT_ID=""
# OAUTH_CLIENT_SECRET=""
# OAUTH_REDIRECT_URI="http://localhost:8000/oauth2/callback"

# --- GitHub OAuth2 ---
# 从 https://github.com/settings/developers 获取
# GITHUB_CLIENT_ID=""
# GITHUB_CLIENT_SECRET=""
# GITHUB_REDIRECT_URI="http://localhost:8000/oauth2/github/callback"

# --- 用户系统配置 ---
# 用户 Session 签名密钥
# USER_SESSION_SECRET="your-user-session-secret"

# 用户 Session 有效期（秒），默认 7 天
# USER_SESSION_MAX_AGE=604800

# 用户 Session Cookie SameSite 策略（lax/strict/none）
# lax: 允许 OAuth 跨站重定向（推荐，默认值）
# strict: 更严格的安全策略，但会导致 OAuth 登录失败
# USER_COOKIE_SAMESITE="lax"

# Token 加密密钥（32 字节）
# TOKEN_ENCRYPT_KEY="your-32-byte-encrypt-key-here!!"

# ===========================================
# 静态资源代理配置（可选）
# ===========================================

# 是否启用静态资源代理（默认: true）
# 国内服务器建议启用代理以加速 CDN 访问
# 国外服务器可关闭代理，直连 CDN 更快
# STATIC_ASSETS_PROXY_ENABLED=true

# 静态资源代理服务器地址（默认: https://proxy.jhun.edu.kg）
# 仅在 STATIC_ASSETS_PROXY_ENABLED=true 时生效
# STATIC_ASSETS_PROXY_BASE="https://proxy.jhun.edu.kg"
